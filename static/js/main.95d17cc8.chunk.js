(this["webpackJsonpmbta-board"]=this["webpackJsonpmbta-board"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(7),c=n.n(a),s=(n(13),n(2)),o=n(3),d=n(5),u=n(4),l=n(8),h=function(){function e(t,n,r){Object(s.a)(this,e),this.routeType=t,this.stationID=n,this.pageLimit=r;var i=this._buildPredictionsEndpoint();this.departuresUpdateSource=new EventSource(i),this.dataStore=new l.JsonApiDataStore}return Object(o.a)(e,[{key:"listenForDepartureUpdates",value:function(e){var t=this;this.departuresUpdateSource.addEventListener("reset",(function(n){var r=t._parsePredictionsUpdate(n);e(r)}))}},{key:"stopListeningForDepartureUpdates",value:function(){this.departuresUpdateSource.close()}},{key:"_buildPredictionsEndpoint",value:function(){var e={"filter[route_type]":this.routeType,"filter[stop]":this.stationID,"page[limit]":this.pageLimit,include:"schedule,trip",api_key:"733619ae05cd45c98e82529a21b8497f"};return"https://api-v3.mbta.com/predictions?"+new URLSearchParams(e).toString()}},{key:"_parsePredictionsUpdate",value:function(e){var t=this;return this.dataStore.sync({data:JSON.parse(e.data)}),this.dataStore.findAll("prediction").map((function(e){return t._parsePrediction(e)})).filter((function(e){return e.departureTime&&"Departed"!==e.status})).sort((function(e,t){return new Date(e.departureTime)-new Date(t.departureTime)})).slice(0,10)}},{key:"_parsePrediction",value:function(e){var t;return{departureTime:(null===e||void 0===e?void 0:e.departure_time)||(null===(t=e.schedule)||void 0===t?void 0:t.departure_time),destination:e.trip.headsign,trainNumber:e.trip.name||"TBD",trackNumber:"TBD",status:e.status||"ON TIME"}}}]),e}(),p=function(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},j=(n(14),n(0));var b=function(e){var t=e.departure,n=p(t.departureTime);return Object(j.jsxs)("tr",{className:"table-row",children:[Object(j.jsx)("th",{children:"MBTA"}),Object(j.jsx)("th",{children:n}),Object(j.jsx)("th",{children:t.destination.toUpperCase()}),Object(j.jsx)("th",{children:t.trainNumber.toUpperCase()}),Object(j.jsx)("th",{children:t.trackNumber.toUpperCase()}),Object(j.jsx)("th",{children:t.status.toUpperCase()})]})},m=(n(16),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.timeCheck=setInterval((function(){return r._checkTime()}),1e3)},r.componentWillUnmount=function(){clearInterval(r.timeCheck)},r._checkTime=function(){r.setState({time:new Date})},r.state={time:new Date},r}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.time.toLocaleString("en-us",{weekday:"long"}).toUpperCase(),t=this.state.time.toLocaleDateString(),n=p(this.state.time);return Object(j.jsxs)("div",{className:"container-header",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:e}),Object(j.jsx)("div",{children:t})]}),Object(j.jsx)("div",{className:"title-header",children:"SOUTH STATION TRAIN INFORMATION"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:"CURRENT TIME"}),Object(j.jsx)("div",{children:n})]})]})}}]),n}(r.Component)),O=(n(17),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.model.listenForDepartureUpdates(r.onResetDepartures)},r.componentWillUnmount=function(){r.model.stopListeningForDepartureUpdates()},r.onResetDepartures=function(e){r.setState({departures:e})};return r.model=new h(2,"place-sstat",20),r.state={departures:[]},r}return Object(o.a)(n,[{key:"render",value:function(){var e=Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:"departuresHeader-board",children:[Object(j.jsx)("th",{children:"CARRIER"}),Object(j.jsx)("th",{children:"TIME"}),Object(j.jsx)("th",{children:"DESTINATION"}),Object(j.jsx)("th",{children:"TRAIN#"}),Object(j.jsx)("th",{children:"TRACK#"}),Object(j.jsx)("th",{children:"STATUS"})]})}),t=this.state.departures.map((function(e,t){return Object(j.jsx)(b,{departure:e},t)}));return Object(j.jsxs)("div",{className:"container-board",children:[Object(j.jsx)(m,{}),Object(j.jsxs)("table",{className:"table-board",children:[e,Object(j.jsx)("tbody",{children:t})]})]})}}]),n}(r.Component));n(18);var v=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("div",{className:"board",children:Object(j.jsx)(O,{})})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};c.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root")),f()}],[[19,1,2]]]);
//# sourceMappingURL=main.95d17cc8.chunk.js.map